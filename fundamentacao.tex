%---------- Segundo Capítulo: Fundamentação --------------

\chapter{Fundamentação}

\section{O Problema do Menor Caminho Multi-Modal com Restrição de Itinerário}

% citar esse artigo: http://www.scialert.net/fulltext/?doi=jas.2009.3804.3812&org=11#290480_ja

%O problema do menor caminho multi-modal consiste em, dada uma rede multi-modal e dois nós nessa rede, a origem e o destino, %encontrar o caminho entre a origem e o destino que totaliza o menor custo.
%Em uma rede de transporte multi-modal, os nós correspondem às paradas do sistema de transporte, ou aos pontos de origem de destino do trajeto. As arestas correspondem aos deslocamentos entre os nós da rede, e tem associado um custo em tempo e um modo. Os modem correspondem aos serviços ou meios de deslocamento na rede, como por exemplo caminhada ou uma determinada linha de ônibus.
%Os serviços de transporte operam segundo tabelas de horários, e portanto para resolver o problema também é necessária a informação do horário de partida no nó de origem.
%Uma rede multi-modal pode ser vista como a superposição de diversas redes mono-modais, com a adição de arestas entre elas para representar o tempo de espera associado à troca de serviços.

% vou escrever mais do multi-objetivo depois
%Esse problema pode ser generalizado para o caso onde o interessa não é apenas minimizar o tempo de chegada ao destino, mas também minimizar outros objetivos como o custo total do transporte e o número de trocas de serviços. Esta generalização é o problema do menor caminho multi-objetivo.

O problema de realizar o planejamento de rota em uma rede de transporte público é bastante semelhante ao conhecido problema de caminho mínimo em grafos, porém com a adição de duas restrições importantes.
A primeira é que, como se trata de uma rede de transporte urbana, existe mais de uma maneira de de percorrer um trecho da rede, como por exemplo, utilizando o transporte público (ônibus, metro, etc) ou não (caminhada, bicicleta, etc).
Esses diferentes modos tem características distintas e portanto precisam ser tratados separadamente.
A segunda restrição é a de itinerário, pois o transporte público das cidades obedecem horários, e o planejamento de rota precisa levar isto em consideração.

Nesta seção primeiro será apresentado o problema clássico do caminho mínimo em grafos, seguido do modelo utilizado no trabalho e o algoritmo de roteamento.

\subsection{O Problema do Caminho Mínimo em Grafos}

Informalmente, o problema do caminho mínimo em grafos consiste em, dado um conjunto de pontos, as ligações, um custo associado a essas ligações e dois pontos específicos, encontrar um caminho entre eles que minimize o custo total, ou seja, se trata de um problema de minimização.
O conjunto de pontos e suas ligações, assim como a função de custo associada à essas ligações, é o que se chama de grafo, ou rede quando existe um valor associado a cada ligação, o peso(ou custo).
Existem diversos tipos de grafos e portanto existem também variações do problema do caminho mínimo, dependendo do tipo de grafo envolvido.
Especificamente, é de interesse a variante que trata dos grafos direcionados e com pesos não-negativos nas ligações.

De maneira mais formal, um grafo direcionado com pesos, ou uma rede direcionada, é um par ordenado $G = (V, A)$ onde $V$ é o conjunto dos nós do grafo(os pontos), cujos elementos são nós; e $A$ é o conjunto das arestas(as ligações) do grafo, cujos elementos são triplas ordenadas da forma $(v_1, v_2, c)$, indicando que existe uma aresta direcionada do nó $v_1$ para o nó $v_2$ com custo $c \in \mathbb{R^+}$.
Um caminho $p$ em $G$ entre dois nós $v_o$ e $v_d$ é uma sequência alternada de nós e arestas, iniciando em $v_o$ e terminando em $v_d$ tal que cada aresta ligue os nós que vem antes e depois dela, ou seja:

\begin{align*}
& p = (v_0, a_0, v_1, a_1, v_2, \ldots ,v_{k-1}, a_{k-1}, v_k) \\
& v_i \in V \qquad 0 <= i <= k \\
& a_i = (v_i, v_{i+1}, c_i) \in A \qquad 0 <= i <= k-1
\end{align*}
onde $v_o = v_0$ e $v_d = v_k$. O custo total $C$ associado ao caminho $p$ é definido como:
\begin{equation*}
C(p) = \sum_{i=0}^{k-1} c_i
\end{equation*}

O problema do caminho mínimo em redes direcionadas consiste, portanto, em encontrar o caminho $p_i \in P_od$ com o menor valor de $C(p_i)$, onde $P_od$ é o conjunto de todos os caminhos possíveis entre $v_o$ e $v_d$. Existem diversos algoritmos eficientes que resolvem esse problema, como o algortimo de Bellman-Ford e o algoritmo de Dijkstra.

\subsection{Modelagem da Rede Multi-Modal com Restrição de Itinerário}

Para utilizar as redes direcionadas na modelagem da rede de transporte urbano, é preciso definir o que cada elemento da rede direcionada representa no mundo real. Os nós da rede representam locais, que podem ser os pontos de origem e destino usuário, ou qualquer um dos pontos de parada do transporte público. Esses nós, portanto, estão associados a coordenadas geográficas.
As arestas direcionadas da rede representam um deslocamento entre dois locais na cidade, do local representado pelo nó de origem até o local representado pelo nó de destino. O custo da aresta representa o tempo que foi gasto no deslocamento, e portanto é sempre um número real positivo, restrição imposta pelo algoritmo de Dijkstra e também pelo algoritmo utilizado no planejador.

No entanto, esse modelo não é suficiente para representar a rede de transporte urbana, ou para realizar o planejamento de rotas, pois não trata as duas restrições adicionais mencionadas anteriormente.
Para contemplar essas restrições, o modelo precisa ser alterado.

Uma rede multi-modal é uma em que cada aresta tem um modo associado. 
No caso da rede de transporte, esse modo determina que tipo de meio transporte foi utilizado para percorrer esse trecho.
Foram definidos dois modos, público, se a aresta representa um caminho percorrido com transporte público, como ônibus; ou privado, no caso de trecho percorrido a pé.
Além disso, para realizar o roteamento, é necessário saber a qual serviço a aresta pertence, no caso de ser do modo privado, pois uma troca de serviço normalmente leva algum tempo que precisa ser considerado. Essa folga impede que o algoritmo forneça uma rota que, na prática, não pode ser executada por incluir descer de um ônibus e subir em outro no mesmo minuto, por exemplo. Uma folga ajuda a levar em conta os ocasionais atrasos no transporte público.
Cada serviço representa uma viagem completa de um veículo, do seu ponto inicial até o final. Por mais que o mesmo veículo realize o percurso contrário, ou o mesmo percurso várias vezes, cada viagem é considerada um serviço separado.

Toda a rede de transporte público opera segundo itinerários bem definidos, e cada veículo tem um horário previsto para chegar em cada parada, e para partir dela para a próxima.
Cada aresta do modo privado tem, portanto, dois horários associados, o de partida no nó de origem, e o de chada no nó destino.
A diferença entre esses dois valores é o custo de tempo do trecho.

Definidos todos os elementos necessários, é possível então formalizar as redes de transporte. Uma rede de transporte é uma quádrupla ordenada $G = (V, A, M, S)$, onde $V$ é o conjunto junto dos nós do grafo, $A$ é o conjunto das arestas, $M$ é o conjunto dos modos e $S$ é o conjunto dos serviços de transporte. O conjunto dos modos possui apenas dois elementos, que são os dois modos possíveis da rede, público ou privado, ou seja, $M = \{m_{pub}, m_{pri}\}$.
Cada um dos elementos $s_i$ do conjunto $S$ dos serviços representa um serviço único.
O conjunto $V$ dos nós é definido exatamente como o caso mono-modal. Por fim, os elementos do conjunto das arestas são sêxtuplas ordenadas definidas da seguinte forma:
\begin{align*}
& A = \{ (v_o, v_d, t_c, t_p, m, s) : t_c <= t_p \} \\
& v_o, v_d \in V \\
& t_c, t_p \in \mathbb{R^+} \\
& m \in M \\
& s = \left\{
	\begin{array}{cr}
		s_{pub} &  \text{se} \qquad m = m_{pub}, \\
		s_i  & \text{caso contrário}. \\
	\end{array}
	\right.
\end{align*}



\subsection{Algoritmo de Roteamento}

\section{NoSQL}
%TODO: citar wikipedia =p

NoSQL, ou ``not only SQL'' (não apenas SQL), é uma classe que agrega vários \sigla{SGBD}{Sistema Gerenciador de Banco de Dados}s com características que os diferem dos SGBDs relacionais comuns.
Esses sistemas usualmente permitem que dados sejam armazenados de forma menos rígida em comparação a um esquema de tabelas do modelo relacional, e também nem sempre procuram garantir as propriedades ACID (Atomicidade, Consistência, Isolamento e Durabilidade) comuns nas transações de bancos de dados.
O objetivo desses sistemas é proporcionar um melhor desempenho em algumas aplicações específicas, por exemplo em situações onde existe um grande volume de dados ou de requisições. Esse ganho de desempenho decorre da boa escalabilidade horizontal desses sistemas, ou do fato de eles evitarem junções (produtos cartesianos) entre tabelas.

Existem várias categorias de sistemas NoSQL, de acordo com a implementação e o modo como os dados são armazenados, como por exemplo bancos de dados de documentos, bancos de dados orientados a objetos ou bancos de dados de grafos.
Destes, apenas os bancos de dados de grafos faz parte do escopo do trabalho.

\subsection{Bancos de Dados de Grafos}

%TODO: referências(wiki)

Bancos de dados de grafos são bancos de dados que armazenam os dados na forma de um grafo. Existem diversos modelos de grafos que podem ser utilizados para este propósito, um exemplo de modelo que bastante utilizado é o dos grafos de propriedades, ou seja, grafos que possuem vértices, arestas e que tanto os vértices quanto as arestas podem possuir propriedades.
Assim, ao modelar os dados de um sistema em um banco de dados de grafos, os nós representam as entidades do sistema, enquanto as arestas representam as relações entre essas entidades, e as propriedades contém as demais informações sobre essas entidades e suas relações.

%inserir figura e um exemplo

Esses bancos de dados em geral possuem uma melhor escalabilidade do que os bancos de dados relacionais, já que não utilizam operações de junção nas consultas.
No entanto, sua maior vantagem é que, devido à sua estrutura, são capazes de realizar consultas próprias de grafos de maneira muito mais eficiente, como por exemplo encontrar o menor caminho entre dois nós, ou ainda descobrir se um dado nó é acessível à partir de outro, percorrendo o grafo apenas através de arestas que possuam uma determinada propriedade.

%comentar sobre os bancos existentes, livres ou não, etc?

\section{Métodos Ágeis}

\section{Desenvolvimento Orientado a Testes}\label{fun:tdd}

\subsection{Testes de Software}

\subsection{Complexidade Ciclomática}

\section{Arquitetura Cliente-Servidor}

\section{Sistemas Georreferenciados}

\section{Licenciamento de Software}

Licenças de software são instrumentos legais que regulam como um determinado software pode ser distribuído e utilizado.
Softwares, usualmente, não são vendidos, apenas tem seu uso licenciado, então a menos que o software seja colocado em domínio público, os direitos do usuário que licenciou o software e os do dono dos direitos autorais precisam ser bem definidos. Portanto, para que seus direitos autorais sejam respeitados, todo desenvolvedor de software deve se preocupar com o licenciamento de seu trabalho.

Além disso, todas as ferramentas de software citadas neste trabalho são distribuídas sob algum tipo de licença, e portanto é necessário conhecer e entender licenças de software para que se possa fazer um uso legítimo dessas ferramentas.

Existem dois tipos principais de licenças de software, as proprietárias e as livres e de código aberto. As licenças proprietárias se concentram em garantir que a distribuição do software seja potencialmente rentável, assim como proteger os direitos dos distribuidores. Já as licenças livres e de código aberto se concentram em proteger os direitos dos usuários.

\subsection{Software Proprietário} 

Software proprietário é aquele cuja licença restringe ou proíbe diversos usos do produto, como a cópia, redistribuição, engenharia reversa ou modificação. Além disso, o usuário que licencia o software normalmente não tem acesso ao código-fonte e a licença pode ter uma duração limitada.

Quando o usuário adquire uma cópia do software, esta costuma vir acompanhada da licença proprietária, na forma dos termos de uso do software. O software só pode ser utilizado se o usuário concordar com os termos de uso, e pode utilizá-lo apenas da forma prevista nos termos de uso.

\subsection{Software Livre e/ de Código Aberto}

Softwares livres e de código aberto são aqueles distribuídos com uma licença que permite que o usuário possa, além de utilizar, também analisar e melhorar o software, através do código fonte. Licenças de software livre e de código aberto tem duas definições diferentes, baseadas em conceitos parecidos, o de software livre e o de software de código aberto. Neste trabalho utilizaremos o o conceito de software livre.

Software livre, como definido pela \sigla{FSF}{Free Software Foundation}, é aquele cuja licença dá ao usuário 4 liberdades básicas\cite{GNUFreeSoftware}:

\begin{itemize}

\item A liberdade de executar o programa, para qualquer propósito (liberdade número 0).
\item A liberdade de estudar como o programa funciona, e adaptá-lo para as suas necessidades (liberdade número 1).
\item A liberdade de redistribuir cópias de modo que você possa ajudar o seu próximo (liberdade número 2).
\item A liberdade de distribuir cópias de sua versão modificada do programa para os outros (liberdade número 3).

\end{itemize}

Para satisfazer as liberdades 1 e 3, o usuário precisa ter acesso ao código fonte do software.

O objetivo dessa categoria de licenças é garantir ao desenvolvedor do software que qualquer um que receba o seu trabalho terá todas as liberdades listadas. Além disso, muitas licenças de software livre também são \emph{copyleft}, ou seja, exigem que trabalhos derivados mantenham todas as liberdades originais. Assim, algum terceiro fica impedido de, com base no trabalho original, realizar alguma modificação e em seguida distribuir a versão modificada sob uma licença proprietária, por exemplo.

%TODO: Listar/descrever licenças de software livre?

\section{Soluções Existentes}

\subsection{Soluções Proprietárias}

\subsection{Soluções Livres}

\section{Considerações}


